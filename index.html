<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é ç´„æœå‹™</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        select, input, button { margin: 10px; padding: 10px; width: 80%; font-size: 16px; }
    </style>
</head>
<body>
    <h2>è«‹é¸æ“‡é ç´„å…§å®¹</h2>

    <label>é¸æ“‡å¸«å‚…ï¼š</label>
    <select id="master">
        <option value="ç‹å°æ˜">ç‹å°æ˜</option>
        <option value="å¼µå¤§å‰">å¼µå¤§å‰</option>
        <option value="æå»ºå®">æå»ºå®</option>
    </select>

    <label>é¸æ“‡æœå‹™é …ç›®ï¼š</label>
    <select id="service">
        <option value="å†·æ°£æ¸…æ´—">å†·æ°£æ¸…æ´—</option>
        <option value="æ°´é›»ç¶­ä¿®">æ°´é›»ç¶­ä¿®</option>
        <option value="ç®¡é“ç–é€š">ç®¡é“ç–é€š</option>
    </select>

    <label>é¸æ“‡é ç´„æ™‚é–“ï¼š</label>
    <input type="datetime-local" id="bookingTime">

    <button onclick="submitBooking()">ç¢ºèªé ç´„</button>

    <script>
        function submitBooking() {
            let master = document.getElementById("master").value;
            let service = document.getElementById("service").value;
            let bookingTime = document.getElementById("bookingTime").value;

            if (!bookingTime) {
                alert("è«‹é¸æ“‡é ç´„æ™‚é–“ï¼");
                return;
            }

            let bookingMessage = `ğŸ“Œ é ç´„ç¢ºèª\nğŸ‘¨ å¸«å‚…ï¼š${master}\nğŸ”§ æœå‹™ï¼š${service}\nâ° æ™‚é–“ï¼š${bookingTime}`;

            liff.sendMessages([
                {
                    type: "text",
                    text: bookingMessage
                }
            ]).then(() => {
                alert("é ç´„æˆåŠŸï¼è«‹è¿”å› LINE");
                liff.closeWindow();
            }).catch((err) => {
                console.error("ç™¼é€è¨Šæ¯å¤±æ•—", err);
            });
        }

        // åˆå§‹åŒ– LIFF
        function initializeLiff() {
            liff.init({ liffId: "ä½ çš„_LIFF_ID_æ”¾é€™è£¡" })
                .then(() => {
                    console.log("LIFF åˆå§‹åŒ–æˆåŠŸ");
                })
                .catch((err) => {
                    console.error("LIFF åˆå§‹åŒ–å¤±æ•—", err);
                });
        }

        document.addEventListener("DOMContentLoaded", initializeLiff);
    </script>
</body>
</html>
